---
sidebar_label: setWorkTime
title: setWorkTime method
description: "устанавливает рабочее время для диаграммы Ганта"
---

# setWorkTime

### Description

@short: Устанавливает рабочее время для диаграммы Ганта

@signature: setWorkTime: (config: object) =\> void

### Parameters

- `config` - (required) *object* - объект конфигурации временного интервала

### Example

~~~jsx
gantt.config.work_time = true;

//обновляет рабочие часы для рабочих дней с ["8:00-17:00"] на ["9:00-18:00"]
gantt.setWorkTime({ hours:["9:00-18:00"] });
 
//отмечает все пятницы как нерабочие дни
gantt.setWorkTime({ day:5, hours:false });
 
//корректирует рабочие часы для пятниц и суббот 
// с ["8:00-17:00"] на ["8:00-12:00"]
gantt.setWorkTime({day : 5, hours : ["8:00-12:00"]});
gantt.setWorkTime({day : 6, hours : ["8:00-12:00"]});
 
//обозначает 31 марта как рабочий день 
gantt.setWorkTime({date : new Date(2013, 2, 31)});
 
//устанавливает 1 января как выходной день
gantt.setWorkTime({date:new Date(2013,0,1), hours:false})

//определяет рабочее время как два интервала: 8:30-12:00, 13:00-17:00 (с перерывом на обед)
gantt.setWorkTime({hours : ["8:30-12:00", "13:00-17:00"]})
~~~

### Related samples
- [Calculate working hours](https://docs.dhtmlx.com/gantt/samples/09_worktime/01_working_hours_per_day.html)

### Details

:::note

Этот метод работает только если включён [work_time](api/config/work_time.md). В противном случае вызов игнорируется.
:::

- Если задача не указана, метод применяется к [глобальному календарю рабочего времени](guides/working-time.md#multipleworktimecalendars). <br>
- Также метод можно вызвать напрямую из [объекта календаря](api/other/calendar.md).


По умолчанию рабочее время настроено следующим образом:

- **Рабочие дни**: с понедельника по пятницу.
- **Рабочие часы**: 08:00 - 17:00.

Этот метод позволяет изменить эти настройки.

## Свойства объекта конфигурации {#configurationobjectproperties}
---------------------------------------

Объект конфигурации может содержать следующие свойства:

<table class="list" cellspacing="0" cellpadding="5" border="0">
  <thead>
  <tr>
  <th>
  Свойство 
  </th>
  <th>
  Описание
  </th>
  </tr>
  </thead>
  <tbody>
  <tr>
  <td rowspan="2"><b id="day">day</b></td>
  <td> число, обозначающее день недели [0 (<i>Воскресенье</i>) - 6 (<i>Суббота</i>)]. Обратите внимание, что можно задать только один день за раз.</td>
  </tr>
  <tr>
  <td colspan="2">
~~~js
//отмечает все понедельники как нерабочие дни
gantt.setWorkTime({ day:1, hours:false }); 
~~~
  </td>
  </tr>
  <tr>
  <td rowspan="2"><b id="date">date</b></td>
  <td> конкретная дата, которая будет установлена как рабочий день или выходной</td>
  </tr>
  <tr>
  <td colspan="2">
~~~js
//отмечает конкретную дату как выходной
gantt.setWorkTime({date:new Date(2013,0,1), hours:false})
~~~
  </td>
  </tr>
  <tr>
  <td rowspan="2"><b id="hours">hours</b></td>
  <td> массив рабочих часов, указанных в виде интервалов 'от'-'до'. <br><i>'false'</i> обозначает выходной день, <i>'true' (по умолчанию)</i> применяет часы по умолчанию (["8:00-17:00"])</td>
  </tr>
  <tr>
  <td colspan="2">
~~~js
//устанавливает рабочие часы для пятниц с 8:00 до 12:00
gantt.setWorkTime({day : 5, hours : ["8:00-12:00"]});
~~~
  </td>
  </tr>
  <tr>
  <td rowspan="2"><b id="hours">customWeeks</b></td>
  <td> объект, задающий разные правила рабочего времени для отдельных периодов.<br> Объект может содержать пары ключ:значение, где <i>ключ</i> - название временного интервала, а <i>значение</i> - объект с атрибутами:
  <ul><li><b>from</b> - (<i>Date</i>) обязательное, дата начала периода</li><li><b>to</b> - (<i>Date</i>) обязательное, дата окончания периода</li><li><b>hours</b> - (<i>array</i>) массив рабочих часов в виде интервалов 'от'-'до'. <br><i>'false'</i> - выходной, <i>'true' (по умолчанию)</i> - часы по умолчанию (["8:00-17:00"])</li><li><b>days</b> - (<i>array</i>) массив из 7 элементов, обозначающих дни недели (0 - воскресенье, 6 - суббота), где 1/true - рабочий день, 0/false - выходной.</li></ul></td>
  </tr>
  <tr>
  <td colspan="2">
~~~js
//изменяет рабочие часы на зимние месяцы
gantt.setWorkTime({
    customWeeks: {
        winter: {
            from: new Date(2018, 11, 1), // 1 декабря 2018
            to: new Date(2019, 2, 1), // 1 марта 2019, 00:00
            hours: ["9:00-13:00", "14:00-16:00"],
            days: [ 1, 1, 1, 1, 0, 0, 0]
        }
    }
});
~~~
  </td>
  </tr>
  </tbody>
</table>

## Установка рабочих часов для ночной смены

При указании свойства **hours** в объекте конфигурации [setWorkTime](api/method/setworktime.md) интервалы должны быть перечислены от раннего времени к позднему. Если интервалы заданы в обратном порядке, некоторые из них могут быть проигнорированы. Например, интервалы после `18:00` будут отброшены в таком случае:

~~~js
// пример неправильных настроек
gantt.setWorkTime({day : 5, hours : ["16:00-18:00", "14:00-15:00",  "08:00-10:00"]});
gantt.setWorkTime({day : 5, hours : ["16:00-18:00", "00:00-04:00",  "05:00-06:00"]});
~~~

Чтобы корректно задать часы ночной смены, их следует разбить на два дня:

- в пределах 24 часов первого дня
- в пределах 24 часов следующего дня

Например:

~~~js
gantt.setWorkTime({day : 5, hours : ["16:00-18:00"]});
gantt.setWorkTime({day : 6, hours : ["00:00-04:00",  "05:00-06:00"]});
~~~

## Перезапись правила рабочего времени

Каждый последующий вызов этого метода для одной и той же даты перезапишет предыдущую настройку рабочего времени:

~~~js
gantt.setWorkTime({hours:["8:00-12:00"]});
gantt.setWorkTime({hours:["13:00-17:00"]});
// итоговое рабочее время будет 13:00-17:00,
// а не объединение обоих интервалов
~~~

## Установка индивидуальных рабочих дней и выходных

Невозможно задать правила рабочего времени, полностью исключающие все рабочие дни или часы. Например, следующие вызовы не сработают:

~~~js
gantt.setWorkTime({ day: 0, hours: [] });
gantt.setWorkTime({ day: 1, hours: [] });
gantt.setWorkTime({ day: 2, hours: [] });
gantt.setWorkTime({ day: 3, hours: [] });
gantt.setWorkTime({ day: 4, hours: [] });
gantt.setWorkTime({ day: 5, hours: [] });
gantt.setWorkTime({ day: 6, hours: [] });
~~~

В таких случаях Gantt проигнорирует вызов для одного из рабочих дней, и он останется с рабочими часами.

Если попытаться вычислить ближайшее рабочее время или длительность от даты с такими настройками, валидной даты или длительности не будет найдено. По сути, такая конфигурация календаря неэффективна. Даже если для конкретных дат заданы рабочие часы, расчёты будут корректны только внутри диапазонов, содержащих рабочие дни и часы. Вычисления вне этих диапазонов могут привести к ошибкам или отсутствию результата.

Чтобы создать календарь, где некоторые месяцы или годы полностью нерабочие, используйте опцию *customWeeks* метода **setWorkTime()**. Для определения рабочих дней и часов в нужном диапазоне необходимо:

- разбить временную шкалу на периоды без рабочих часов
- явно задать рабочие часы для нужных дат

Пример:

~~~js
gantt.setWorkTime({ date: new Date(2025, 3, 10), hours: ["8:00-12:00"] })
gantt.setWorkTime({ date: new Date(2025, 3, 11), hours: ["13:00-17:00"] })

gantt.setWorkTime({
    customWeeks: {
        period1: {
            from: new Date(2025, 3, 1),
            to: new Date(2025, 3, 10),
            hours: false,
        },

        period2: {
            from: new Date(2025, 3, 12),
            to: new Date(2025, 5, 1),
            hours: false,
        },

    }
});
~~~

:::note
Sample: [Использование `customWeeks` для установки всех дней календаря выходными](https://snippet.dhtmlx.com/i0o74zg7)             
:::

### Related API
- [work_time](api/config/work_time.md)
- [unsetWorkTime](api/method/unsetworktime.md)
- [isWorkTime](api/method/isworktime.md)

### Related Guides
- [Расчёт рабочего времени](guides/working-time.md)

### Change log
- свойство **customWeeks** добавлено в версии 7.1;
- формат свойства **hours** в конфиге изменён в версии 7.0.

