createDataProcessor
=============


@todo:
	check the autogenerated stub

@short:
	Creates a new dataProcessor instance and attaches it to gantt

@params:
- config	object 	dataProcessor configuration object

@returns 
- dataProcessor	object	the dataProcessor object




@example:


var dp = gantt.createDataProcessor({
   url: "/api",
   mode: "REST"
});


@template:	api_method

@descr:


The parameter may be one of the following

1. `{url:string, mode:string}` object specifying one of predefining modes

~~~js
var dp = gantt.createDataProcessor({
   url: "/api",
   mode: "REST"
});
~~~

where:

- url - the URL to the server side
- mode - the mode of sending data to the server: "JSON" | "REST-JSON" | "JSON" | "POST" | "GET"

2. Or a custom router object:

~~~js
var dp = gantt.createDataProcessor(router);

~~~

where the router is either a function:

~~~js
// entity - "task"|"link"
// action - "create"|"update"|"delete"
// data - an object with task or link data
// id – the id of a processed object (task or link)
var dp = gantt.createDataProcessor(function(entity, action, data, id) { 
	switch(action) {
    	case "create":
           return gantt.ajax.post(
            	server + "/" + entity,
                data
           );
        break;
        case "update":
           return gantt.ajax.put(
                 server + "/" + entity + "/" + id,
                 data
            );
        break;
        case "delete":
           return gantt.ajax.del(
                 server + "/" + entity + "/" + id
           );
         break;
   }
});
~~~

or an object of the following structure:

~~~js
var dp = gantt.createDataProcessor({ 
   task: {
      create: function(data) {},
      update: function(data, id) {},
      delete: function(id) {}
   },
   link: {
      create: function(data) {},
      update: function(data, id) {},
      delete: function(id) {}
   }
});
~~~

All the functions of the router object should return either a Promise or a data response object. This is needed for the dataProcessor to apply the database id and to hook **onAfterUpdate* event of the data processor.

~~~js
router = function(entity, action, data, id) {
	return new gantt.Promise(function(resolve, reject) {
    	// … some logic
        return resolve({tid: databaseId});
 	});
}
~~~

Thus you can use DataProcessor for saving data in localStorage, or any other storage which is not linked to a certain URL, or in case if there are two different servers (URLs) responsible for creation and deletion of objects.



@related:
	desktop/server_side.md

@relatedsample:
	08_api/22_data_processor.html
